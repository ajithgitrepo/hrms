<<<<<<< HEAD
{% extends "layouts/base.html" %}

{% block title %} mapping {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
<!-- <link rel="stylesheet" href="/static/assets/vendor/animate.css/animate.min.css">
<link rel="stylesheet" href="/static/assets/vendor/sweetalert2/dist/sweetalert2.min.css"> -->

{% endblock stylesheets %}

{% block content %}

   <!-- Header -->
  <div class="header bg-primary pb-6">
    <div class="container-fluid">
      <div class="header-body">
        <div class="row align-items-center py-4">
          <div class="col-lg-6 col-7">
            <h6 class="h2 text-white d-inline-block mb-0">Organization</h6>
            <nav aria-label="breadcrumb" class="d-none d-md-inline-block ml-md-4">
              <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
                <li class="breadcrumb-item"><a href="#"><i class="fas fa-user"></i></a></li>
                <li class="breadcrumb-item"><a href="#">Employee Mapping</a></li>
                <!-- <li class="breadcrumb-item active" aria-current="page">Datatables</li> -->
              </ol>
            </nav>
          </div>
          <div class="col-lg-6 col-5 text-right">
            <a href="{% url 'emp_mapping' %}" class="btn btn-sm btn-neutral">Back</a>
            <!-- <a href="#" class="btn btn-sm btn-neutral">Filters</a> -->
          </div>
        </div>
      </div>
    </div>
  </div>

   

    <!-- Page content -->
    <div class="container-fluid mt-6">

      <div class="row">
       
        <div class="col-xl-12 order-xl-1">

          <div class="card">
            <div class="card-header">
              <div class="row align-items-center">
                <div class="col-8">
                  <h3 class="mb-0">Employee Mapping </h3>
                </div>
                <div class="col-4 text-right">
                  <!-- <a href="#!" class="btn btn-sm btn-primary">Settings</a> -->
                </div>
              </div>
            </div>
            <div class="card-body">
                  <form method="POST" class="post-form" action="">  
                    {% csrf_token %}  
               <!--  <h6 class="heading-small text-muted mb-4">Basic Info</h6> -->
                <div class="pl-lg-4">
                  <div class="row">
                      
                    <div class="col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label" for="input-employeeid">Employee Name</label>
                        <select  class="form-control select2" data-toggle="select" onchange="handleSelectChange(event)"  name="employee"  id="ddl_employee" value="{{ form.data.employee }}" >
                              <option value="">select</option>
                              {% for emp in employees %}
                                  <option   value="{{ emp.employee_id  }}" {% if emp.employee_id == form.data.employee %} selected{% endif %}>  {{ emp.first_name }} {{ emp.last_name }}  ({{ emp.employee_id }})</option>
                              {% endfor %} 
                        </select>
                       {{ form.errors.employee }}
                      </div> 
                    </div>
                   
                   
                    <div class="col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label" for="input-address">Department</label>
                        <select class="form-control" value="{{ form.data.department }}" id="ddl_department" name="department">
                        <option value="">select</option>
                          {% for dept in department %}
                              <option value="{{ dept.id }}" {% if form.data.department == "{{ dept.id }}" %} selected{% endif %}>  {{ dept.name }}</option>
                          {% endfor %} 
                        </select>
                      </div>
                    </div> 
                    <div class="col-lg-4">
                        <div class="form-group">
                              <label class="form-control-label" for="input-country">Role</label>
                         
                              <select class="form-control" id="ddl_role"  value="{{ form.data.role }}" name="role">
                                    <option value="">select</option>
                                    {% for role in roles %}
                                        <option value="{{ role.id }}" {% if form.data.role == "{{ role.id }}" %} selected{% endif %}>  {{ role.name }}</option>
                                    {% endfor %} 
                              </select>
                        </div>
                      </div> 
                  </div>

                  <div class="row">    
                      <div class="col-lg-4">
                        <div class="form-group">
                              <label class="form-control-label" for="input-country">Location</label>
                            
                        <select class="form-control" id="ddl_location" value="{{ form.data.location }}" name="location">
                              <option value="">select</option>
                               {% for loc in location %}
                                  <option value="{{ loc.id }}" {% if loc.id|stringformat:"i" == form.data.location %} selected{% endif %}>  {{ loc.location }}</option>
                              {% endfor %} 
                        </select>
                        </div>
                      </div> 
                
                      <div class="col-lg-4">
                        <div class="form-group">
                          <label class="form-control-label" for="input-employeeid">Reporting To</label>
                          <select id="ddl_reporting"  class="form-control select2" data-toggle="select"   name="reporting"  id="ddl_employee" value="{{ form.data.reporting }}" >
                                <option value="">select</option>
                                {% for emp in employees %}
                                    <option   value="{{ emp.employee_id  }}" {% if emp.employee_id == form.data.employee %} selected{% endif %}>  {{ emp.first_name }} {{ emp.last_name }}  ({{ emp.employee_id }})</option>
                                {% endfor %} 
                          </select>
                         {{ form.errors.employee }}
                        </div> 
                      </div>

                </div>
                <hr class="my-4" />
               <center> <button class="btn btn-primary" type="submit">Save</button>
                  <a href="{% url 'emp_mapping' %}" class="btn btn-primary btn-dark">Cancel</a>
            </center>

               
                <!-- Address -->
                <!-- <button type="submit" class="btn btn-primary">Submit</button>  -->
                <!--<h6 class="heading-small text-muted mb-4">Contact information</h6>
                <div class="pl-lg-4">
                  <div class="row">
                    <div class="col-md-12">
                      <div class="form-group">
                        <label class="form-control-label" for="input-address">Address</label>
                        <input id="input-address" class="form-control" placeholder="Home Address" value="Bld Mihail Kogalniceanu, nr. 8 Bl 1, Sc 1, Ap 09" type="text">
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label" for="input-city">City</label>
                        <input type="text" id="input-city" class="form-control" placeholder="City" value="New York">
                      </div>
                    </div>
                    <div class="col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label" for="input-country">Country</label>
                        <input type="text" id="input-country" class="form-control" placeholder="Country" value="United States">
                      </div>
                    </div>
                    <div class="col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label" for="input-country">Postal code</label>
                        <input type="number" id="input-postal-code" class="form-control" placeholder="Postal code">
                      </div>
                    </div>
                  </div>
                </div>-->
                <hr class="my-4" />
                <!-- Description -->
                <!-- <h6 class="heading-small text-muted mb-4">About me</h6>
                <div class="pl-lg-4">
                  <div class="form-group">
                    <label class="form-control-label">About Me</label>
                    <textarea rows="4" class="form-control" placeholder="A few words about you ...">A beautiful premium dashboard for Bootstrap 4.</textarea>
                  </div>
                </div> -->
              </form>
            </div>
          </div>
        </div>
      </div>

   

    </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

<script>

$(document).ready(function()
      {

      var base_url = window.location.origin;

      var host = window.location.host;  

      var pathArray = window.location.pathname.split( '/' );
     // alert(pathArray[2]);
      if(pathArray[2] != "" && pathArray[2] != "0") 

            $('#ddl_employee').val(pathArray[2]);
            $('#ddl_employee').select2().val(pathArray[2]);;
            get_details(pathArray[2])
      });


function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
var csrftoken = getCookie('csrftoken');
function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}

function get_details(emp_id)
{

      var csrf = $('meta[name="csrf-token"]').attr('content');
      $.ajax({
           url: '/view_more',
          type: 'POST',
          data: {id : emp_id, "csrfmiddlewaretoken": csrftoken,},
          dataType: 'json',
          success: function( data ) {
           
            jQuery.each(data, function(index, item) { //alert(item.model);
                  if(item.model == "app.employee")
                  {
                        location1 = (item.fields.location)
                        $('#ddl_department').val(item.fields.department)
                        $('#ddl_role').val(item.fields.role) 
                        $('#ddl_location').val(item.fields.location)
                        $('#ddl_reporting').val(item.fields.reporting)
                  }
                 
                  });
           
           }
      })

}

function handleSelectChange(event){
      var selectElement = event.target;
      var value = selectElement.value;
      var emp_id = value;
      get_details(emp_id);
  // alert(id);
      
    }    



</script>

{% endblock javascripts %}
=======
{% extends "layouts/base.html" %}

{% block title %} mapping {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
<!-- <link rel="stylesheet" href="/static/assets/vendor/animate.css/animate.min.css">
<link rel="stylesheet" href="/static/assets/vendor/sweetalert2/dist/sweetalert2.min.css"> -->

{% endblock stylesheets %}

{% block content %}

   <!-- Header -->
  <div class="header bg-primary pb-6">
    <div class="container-fluid">
      <div class="header-body">
        <div class="row align-items-center py-4">
          <div class="col-lg-6 col-7">
            <h6 class="h2 text-white d-inline-block mb-0">Organization</h6>
            <nav aria-label="breadcrumb" class="d-none d-md-inline-block ml-md-4">
              <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
                <li class="breadcrumb-item"><a href="#"><i class="fas fa-user"></i></a></li>
                <li class="breadcrumb-item"><a href="#">Employee Mapping</a></li>
                <!-- <li class="breadcrumb-item active" aria-current="page">Datatables</li> -->
              </ol>
            </nav>
          </div>
          <div class="col-lg-6 col-5 text-right">
            <a href="{% url 'emp_mapping' %}" class="btn btn-sm btn-neutral">Back</a>
            <!-- <a href="#" class="btn btn-sm btn-neutral">Filters</a> -->
          </div>
        </div>
      </div>
    </div>
  </div>

   

    <!-- Page content -->
    <div class="container-fluid mt-6">

      <div class="row">
       
        <div class="col-xl-12 order-xl-1">

          <div class="card">
            <div class="card-header">
              <div class="row align-items-center">
                <div class="col-8">
                  <h3 class="mb-0">Employee Mapping </h3>
                </div>
                <div class="col-4 text-right">
                  <!-- <a href="#!" class="btn btn-sm btn-primary">Settings</a> -->
                </div>
              </div>
            </div>
            <div class="card-body">
                  <form method="POST" class="post-form" action="">  
                    {% csrf_token %}  
               <!--  <h6 class="heading-small text-muted mb-4">Basic Info</h6> -->
                <div class="pl-lg-4">
                  <div class="row">
                      
                    <div class="col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label" for="input-employeeid">Employee Name</label>
                        <select  class="form-control select2" data-toggle="select" onchange="handleSelectChange(event)"  name="employee"  id="ddl_employee" value="{{ form.data.employee }}" >
                              <option value="">select</option>
                              {% for emp in employees %}
                                  <option   value="{{ emp.employee_id  }}" {% if emp.employee_id == form.data.employee %} selected{% endif %}>  {{ emp.first_name }} {{ emp.last_name }}  ({{ emp.employee_id }})</option>
                              {% endfor %} 
                        </select>
                       {{ form.errors.employee }}
                      </div> 
                    </div>
                   
                   
                    <div class="col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label" for="input-address">Department</label>
                        <select class="form-control" value="{{ form.data.department }}" id="ddl_department" name="department">
                        <option value="">select</option>
                          {% for dept in department %}
                              <option value="{{ dept.id }}" {% if form.data.department == "{{ dept.id }}" %} selected{% endif %}>  {{ dept.name }}</option>
                          {% endfor %} 
                        </select>
                      </div>
                    </div> 
                    <div class="col-lg-4">
                        <div class="form-group">
                              <label class="form-control-label" for="input-country">Role</label>
                         
                              <select class="form-control" id="ddl_role"  value="{{ form.data.role }}" name="role">
                                    <option value="">select</option>
                                    {% for role in roles %}
                                        <option value="{{ role.id }}" {% if form.data.role == "{{ role.id }}" %} selected{% endif %}>  {{ role.name }}</option>
                                    {% endfor %} 
                              </select>
                        </div>
                      </div> 
                  </div>

                  <div class="row">    
                      <div class="col-lg-4">
                        <div class="form-group">
                              <label class="form-control-label" for="input-country">Location</label>
                            
                        <select class="form-control" id="ddl_location" value="{{ form.data.location }}" name="location">
                              <option value="">select</option>
                               {% for loc in location %}
                                  <option value="{{ loc.id }}" {% if loc.id|stringformat:"i" == form.data.location %} selected{% endif %}>  {{ loc.location }}</option>
                              {% endfor %} 
                        </select>
                        </div>
                      </div> 
                
                      <div class="col-lg-4">
                        <div class="form-group">
                          <label class="form-control-label" for="input-employeeid">Reporting To</label>
                          <select id="ddl_reporting"  class="form-control select2" data-toggle="select"   name="reporting"  id="ddl_employee" value="{{ form.data.reporting }}" >
                                <option value="">select</option>
                                {% for emp in employees %}
                                    <option   value="{{ emp.employee_id  }}" {% if emp.employee_id == form.data.employee %} selected{% endif %}>  {{ emp.first_name }} {{ emp.last_name }}  ({{ emp.employee_id }})</option>
                                {% endfor %} 
                          </select>
                         {{ form.errors.employee }}
                        </div> 
                      </div>

                </div>
                <hr class="my-4" />
               <center> <button class="btn btn-primary" type="submit">Save</button>
                  <a href="{% url 'emp_mapping' %}" class="btn btn-primary btn-dark">Cancel</a>
            </center>

               
                <!-- Address -->
                <!-- <button type="submit" class="btn btn-primary">Submit</button>  -->
                <!--<h6 class="heading-small text-muted mb-4">Contact information</h6>
                <div class="pl-lg-4">
                  <div class="row">
                    <div class="col-md-12">
                      <div class="form-group">
                        <label class="form-control-label" for="input-address">Address</label>
                        <input id="input-address" class="form-control" placeholder="Home Address" value="Bld Mihail Kogalniceanu, nr. 8 Bl 1, Sc 1, Ap 09" type="text">
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label" for="input-city">City</label>
                        <input type="text" id="input-city" class="form-control" placeholder="City" value="New York">
                      </div>
                    </div>
                    <div class="col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label" for="input-country">Country</label>
                        <input type="text" id="input-country" class="form-control" placeholder="Country" value="United States">
                      </div>
                    </div>
                    <div class="col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label" for="input-country">Postal code</label>
                        <input type="number" id="input-postal-code" class="form-control" placeholder="Postal code">
                      </div>
                    </div>
                  </div>
                </div>-->
                <hr class="my-4" />
                <!-- Description -->
                <!-- <h6 class="heading-small text-muted mb-4">About me</h6>
                <div class="pl-lg-4">
                  <div class="form-group">
                    <label class="form-control-label">About Me</label>
                    <textarea rows="4" class="form-control" placeholder="A few words about you ...">A beautiful premium dashboard for Bootstrap 4.</textarea>
                  </div>
                </div> -->
              </form>
            </div>
          </div>
        </div>
      </div>

   

    </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

<script>

$(document).ready(function()
      {

      var base_url = window.location.origin;

      var host = window.location.host;  

      var pathArray = window.location.pathname.split( '/' );
     // alert(pathArray[2]);
      if(pathArray[2] != "" && pathArray[2] != "0") 

            $('#ddl_employee').val(pathArray[2]);
            $('#ddl_employee').select2().val(pathArray[2]);;
            get_details(pathArray[2])
      });


function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
var csrftoken = getCookie('csrftoken');
function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}

function get_details(emp_id)
{

      var csrf = $('meta[name="csrf-token"]').attr('content');
      $.ajax({
           url: '/view_more',
          type: 'POST',
          data: {id : emp_id, "csrfmiddlewaretoken": csrftoken,},
          dataType: 'json',
          success: function( data ) {
           
            jQuery.each(data, function(index, item) { //alert(item.model);
                  if(item.model == "app.employee")
                  {
                        location1 = (item.fields.location)
                        $('#ddl_department').val(item.fields.department)
                        $('#ddl_role').val(item.fields.role) 
                        $('#ddl_location').val(item.fields.location)
                        $('#ddl_reporting').val(item.fields.reporting)
                  }
                 
                  });
           
           }
      })

}

function handleSelectChange(event){
      var selectElement = event.target;
      var value = selectElement.value;
      var emp_id = value;
      get_details(emp_id);
  // alert(id);
      
    }    



</script>

{% endblock javascripts %}
>>>>>>> origin/hrms-09-02-2022
 